@{
    ViewData["Title"] = "Štatistika";
}

<component type="typeof(Splitter)" param-File="@("1.jpg")" render-mode="ServerPrerendered" />

<div class="dark-background padding-heavy text-center light-text bright-color">
    <h1 class="heavy-text mb-3">
        ŠTATISTIKA
    </h1>

    <input id="date" value="show graph" type="button"/>

    <div>
        <canvas class="graph" id="chart"></canvas>
    </div>
</div>

<component type="typeof(Splitter)" param-File="@("2.jpg")" render-mode="ServerPrerendered" />

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script language="javascript" type="text/javascript">
    $(function ()
    {
        $("#date").click(function ()
        {
            $.ajax(
            {
                type: "POST",
                url: "/Home/Statistics",
                data: "",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: OnSuccessResult,
                error: OnError
            });  
            
            function OnSuccessResult (data)
            {
                var chartData = data;
                var chartLabels = data[0];
                var chartData = data[1];

                new Chart("chart", 
                {
                    type: "bar",
                    data:
                    {
                        labels: chartLabels,
                        datasets: 
                        [{
                            backgroundColor: "white",
                            data: chartData
                        }]
                    },
                    options:
                    {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            function OnError (data)
            {
            
            }
        });
    });
</script>